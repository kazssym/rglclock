1999-02-14  Kaz Sasayama  <Kaz.Sasayama@hypercore.co.jp>

	* gtkrc: New file.
	* Makefile.am (pkgdata_DATA): Add gtkrc.
	(EXTRA_DIST): Add gtkrc.

1999-02-13  Kaz Sasayama  <Kaz.Sasayama@hypercore.co.jp>

	* glclock.cc (finish_realize): New function.  Update the header
	too.
	(handle_configure_event): Remove context creation.
	(glclock): Connect "realize".

	* about.cc (show): Use gtk_grab_add/remove.
	(finish_realize): Renamed and modified from handle_configure_event
	for the "realize" signal.  Update all refs too.
	(about_dialog): Add "realize" connection and remove
	"configure_event".

	* main.cc (parse_gtkrc) [PKGDATADIR]: Add gtk_rc_parse for default
	gtkrc file.

	* Makefile.am (INCLUDES): Add -DPKGDATADIR=....

	* gettextize.
	* po/POTFILES.in: New file.
	* po/ja.po: New file.
	* configure.in (ALL_LINGUAS): Add ja.

	* main.cc (parse_gtkrcs): New function.
	(main): Initialize NLS.
	(main): Use parse_gtkrcs.

1999-02-12  Kaz Sasayama  <Kaz.Sasayama@hypercore.co.jp>

	* glclock.cc: Add #include <libintl.h>.
	Add using namespace std.
	(_): Defined.
	(glclock): Use the _ macro for message text.

	* about.cc: Add #include <libintl.h>.
	(_): Defined to use gettext.

	* main.cc: Add #include <libintl.h>.
	(_): Defined.

	* Makefile.am (INCLUDES): Add -DLOCALEDIR=....

1999-02-05  Kaz Sasayama  <Kaz.Sasayama@hypercore.co.jp>

	* Makefile.am (data_DATA): Added.

1999-02-04  Kaz Sasayama  <Kaz.Sasayama@hypercore.co.jp>

	* TODO: Updated.

	* NEWS: Updated.

	* Makefile.am (INCLUDES): Remove -DSESSION.

	* about.cc: Remove #define ENABLE_TRANSIENT_FOR_HINT.

	* configure.in: Add options: --disable-wm-command and
	--disable-wm-transient-for.
	* acconfig.h: Add entries for SESSION and
	ENABLE_TRANSIENT_FOR_HINT.

	* about.cc (about_dialog): Use asprintf/sprintf for gettext
	migration later.
	(populate): Make the version string using asprintf/sprintf.

1999-02-03  Kaz Sasayama  <Kaz.Sasayama@hypercore.co.jp>

	* Version 1.2.1.

	* NEWS: Updated.

1999-02-02  Kaz Sasayama  <Kaz.Sasayama@hypercore.co.jp>

	* about.cc (about_dialog): Set the window title.
	(about_dialog): Position the window to center.
	(populate): Set the default to the OK button.
	(about_dialog): Construct the title string on the fly.
	(_): Defined for later gettext migration.
	(populate): Mark "OK" as a translation string.

	* about.cc (show): Remove the argument and use the parent_widget
	member.
	(show): Remove connect/disconnect for "configure_event".
	(about_dialog): Add an argument for the parent_widget
	initialization.
	(about_dialog): Connect "configure_event" to the handler.
	(handle_configure_event): Change the cast of the callback data to
	about_dialog *.
	(populate): Set the expand arg of the OK button to FALSE.

	* glclock.h (class about_dialog): Add member: parent_widget.

	* about.cc (handle_configure_event): Made to a static member.

	* glclock.h (class about_dialog): Add static members.

	* about.cc (handle_ok): Made to a static member.
	(show): Handle the case of parent == NULL.
	(handle_delete_event): New method.
	(about_dialog): Connect "delete_event" to the handler.

	* glclock.cc (describe): Use about_dialog.

	* about.cc (handle_ok): Renamed from ok.
	(about_dialog, ~about_dialog, show): New methods, replacing
	show_about.
	(populate): New function.
	(show_about): Removed.

	* glclock.h (class about_dialog): New class.

	* NEWS: Updated.
	* README: Updated.
	* TODO: Updated.

1999-02-01  Kaz Sasayama  <Kaz.Sasayama@hypercore.co.jp>

	* Version 1.2.1.

	* AUTHORS: Update text.
	* NEWS: Update text.
	* README: Update text.
	* TODO: Update text.

1999-01-29  Kaz Sasayama  <Kaz.Sasayama@hypercore.co.jp>

	* rglclock.1: Update text.

	* about.cc (show_about): Set padding for the label.

	* about.cc: #include "glclock.h".
	* glclock.cc: Remove delaration of show_about.
	* glclock.h: Declare show_about.

	* about.cc (show_about): Disallow the dialog resize.
	(show_about): Update the label text.
	(show_about): Use gtk_box_pack_start.
	[ENABLE_TRANSIENT_FOR_HINT]: #include <gdk/gdkx.h>.
	[ENABLE_TRANSIENT_FOR_HINT] (handle_configure_event): New
	function.
	(show_about) [ENABLE_TRANSIENT_FOR_HINT]: Connect
	"configure_event" to its handler.

	* simple.c (simple_draw_clock): Use gettimeofday if available.

1999-01-27  Kaz Sasayama  <Kaz.Sasayama@hypercore.co.jp>

	* Makefile.am (dist-snapshot): New target.

	* simple.c (simple_draw_clock): Modify the look.
	(simple_draw_clock): Fix the test condition.

1999-01-25  Kaz Sasayama  <Kaz.Sasayama@hypercore.co.jp>

	* simple.c (simple_draw_clock): Mark every hours.

	* glclock.cc (describe): Add a call to show_about.

	* Makefile.am (rglclock_SOURCES): Add about.cc.
	* about.cc: New file.

	* simple.c (simple_draw_clock): Modify parameters.
	(simple_draw_clock): Use the model local viewer by default.

	* module.cc (draw_clock): Move the core code to simple.c.
	(init): Likewise.

	* simple.c (simple_draw_clock, simple_init): New functions.
	* simple.h: Updated with the prototype decl.

1999-01-24  Kaz Sasayama  <Kaz.Sasayama@hypercore.co.jp>

	* configure.in: Add checks for the ALSA library.

	* glclock.cc (glclock): Use "Exit" for the menu label instead of
	"Quit".  Fill values in menu items.

	* module.cc: Remove #define _GNU_SOURCE.

	* simple.h: New file.
	* simple.c: New file.
	
	* configure.in: Add the config header.

	* acconfig.h: New file.
	* config.h.in: Generated by autoheader.

	* gdkgl.c [HAVE_CONFIG_H]: Include "config.h".

	* NEWS: Updated.

1999-01-23  Kaz Sasayama  <Kaz.Sasayama@hypercore.co.jp>

	* AUTHORS: Updated.

	* main.cc: Do not define _GNU_SOURCE.
	(main): Choose an appropriate visual.

	* glclock.h: Include "gdkgl.h".  Reorder #include's.

	* glclock.cc: Do not define _GNU_SOURCE.
	Include "gdkgl.h".  Reorder #include's.
	(update): Use "gdkgl.h" function.
	(handle_configure_event): Likewise.

	* configure.in: Remove gdkGL/Makefile from output.

	* Makefile.am (rglclock_SOURCES): Add gdkgl.c.
	(rglclock_LDADD): Remove gdkGL/libgdkGL.a.
	(noinst_HEADERS): Add gdkgl.h.
	(SUBDIRS): Removed.

	* main.cc (parse_options): New function.
	(main): Add option parsing.

	* glclock.h: Include <gtk/gtkmenufactory.h>.

	* configure.in: Change the version number system.
	Remove unneeded blank lines.
	Define _GNU_SOURCE.
	Add checks for <getopt.h> and getopt_long.

1998-09-22  Kaz Sasayama  <Kaz.Sasayama@hypercore.co.jp>

	* glclock.cc (glclock): Update menu entries.

1998-09-21  Kaz Sasayama  <Kaz.Sasayama@hypercore.co.jp>

	* NEWS: Update.

	* glclock.h (class glclock): Add members: describe, struct
	menu_listener, menu_quit, menu_factory, about.

	* glclock.cc (menu_activate): New function.
	(describe): New function.
	(~glclock): Destroy the member menu factory.
	(glclock): Create and initialize a menu factory.
	(handle_button_event): Handle button-3 for pop-up menu.
	(menu_quit): New function.

1998-08-19  Kaz Sasayama  <Kaz.Sasayama@hypercore.co.jp>

	* module.cc (draw_clock) [LOGO128]: Add experimental texture code.
	(init) [LOGO]: Likewise.

	* module.h (class module): Add member rot.
	* module.cc (rot): Removed.
	(init): Initialize this->rot.
	(draw_clock): Set the modelview matrix.
	(rotate): Do not reset the modelview matrix.

	* module.cc (draw_clock): Use flat shading while drawing a dial.
	(draw_clock) [0]: (Use local viewer while drawing hands.)

1998-08-10  Kaz Sasayama  <Kaz.Sasayama@hypercore.co.jp>

	* Makefile.am (INCLUDES): Define SESSION.

	* main.cc [SESSION] (argc_save): New variable.
	[SESSION] (argv_save): New variable.
	[SESSION] (set_command): New function.
	(main) [SESSION]: Save the original arguments.
	(main) [SESSION]: Connect after-realize to set_command.

1998-07-31  Kaz Sasayama  <Kaz.Sasayama@hypercore.co.jp>

	* rglclock.1: Update .TH.

	* Makefile.am (man_MANS): Add rglclock.1.
	(EXTRA_DIST): Add ${man_MANS}.

	* rglclock.1: New file.

1998-07-27  Kaz Sasayama  <Kaz.Sasayama@hypercore.co.jp>

	* main.cc (clean): #ifdef out unref'ing toplevel.

	* module.cc (HAND_ADC): New const.
	(HAND_SC): New const.
	(HAND_SR): New const.
	(draw_clock): Use them.

1998-07-23  Kaz Sasayama  <Kaz.Sasayama@hypercore.co.jp>

	* glclock.cc (glclock): Add an exception handler.

1998-07-19  Kaz Sasayama  <Kaz.Sasayama@hypercore.co.jp>

	* TODO: Updated.

1998-07-16  Kaz Sasayama  <Kaz.Sasayama@hypercore.co.jp>

	* main.cc: Move toplevel out of main.
	(main): Remove local toplevel.

1998-07-14  Kaz Sasayama  <Kaz.Sasayama@hypercore.co.jp>

	* glclock.cc: Test HAVE_SYS_TIME_H for sys/time.h.

	* module.cc (draw_clock): Reduce the number of rings.

	* configure.in: Add check for sys/time.h.  Add AC_HEADER_TIME.

	* glclock.cc (update): Compensate rotation speed using
	gettimeofday.

1998-07-13  Kaz Sasayama  <Kaz.Sasayama@hypercore.co.jp>

	* Makefile.am (rglclock_LDFLAGS): Removed.
	* configure.in: Remove AM_PROG_LIBTOOL.

	* NEWS: Updated.

	* module.cc (draw_clock): Draw a mark at the top of the dial.
	(rotate): Correct rotation.

	* configure.in: Check unistd.h and gettimeofday.

	* module.cc (draw_clock): Use glXXXf functions instead of glXXXd.

1998-07-12  Kaz Sasayama  <Kaz.Sasayama@hypercore.co.jp>

	* glclock.cc: Update the FSF address.
	* glclock.h: Likewise.
	* main.cc: Likewise.
	* module.cc: Likewise.
	(draw_clock): Draw the back of the dial.

	* module.h: Likewise.

	* README: Add license information.

1998-07-11  Kaz Sasayama  <Kaz.Sasayama@hypercore.co.jp>

	* NEWS: Updated.

	* TODO: Updated.

	* glclock.h (class glclock): Remove member tm and add t.
	(class glclock): Update the definition.  Reorder data members.
	* glclock.cc (glclock): Set the new member.
	(update): Update and use the new member.
	(handle_configure_event): Create a context if none.
	(create_context): Removed.
	(glclock): Do not connect "realize" to a handler.
	(handle_destroy_event): New function.
	(glclock): Connect "destroy_event" to its handler.
	(~glclock): Do not destroy context.
	(update): Do not test the availability of a window.

	* glclock.cc (handle_expose_event): Do not draw here.

	* main.cc (clean): New function.
	(handle_delete_event): Call gtk_main_quit instead.
	(main): Register clean as a exit function.
	(handle_sig_by_exit): Removed.
	(set_handlers): Removed.
	(main): Remove a call to set_handlers.

	* main.cc (handle_delete_event): New function.
	(main): Connect a "delete_event" handler for toplevel.

	* glclock.cc (update): Draw clock only when a window and a context
	are available.

1998-07-09  Kaz Sasayama  <Kaz.Sasayama@hypercore.co.jp>

	* Version 0.24 released.

	* TODO: Updated.

	* NEWS: Updated.

	* glclock.cc (glclock): Install the "button_press/release_event"
	handlers.
	(glclock): Change rot_velocity's initial value to 0.
	(update): Convert the rotation velocity into degrees.

	* glclock.h (class glclock): Update the definition.
	(class glclock): Add new members press_x and press_y.

	* glclock.cc (glclock): Do not install the "expose_event"
	handler.
	(handle_button_event): New function.

	* Version 0.21 released.

	* TODO: Updated.

	* NEWS: Updated.

	* glclock.cc (update): Call draw_clock directly.

	* gdkGL/Makefile.am (libgdkGL_a_SOURCES): Drop gdkGL_gdkutils.c.
	(noinst_HEADERS): Drop gdkGL_gdkutils.h.

	* module.cc (draw_clock): Raise the GL_SPECULAR values.
	(init): Add another light.
	(draw_clock): Raise the GL_SHININESS value.

	* glclock.h (class glclock): Update the definition.
	* glclock.cc (handle_configure_event): New function.
	(glclock): Connect "configure_event" to the handler.
	(handle_expose_event): Do not call glViewport.
	Remove #include <GL/gl.h>.

	* module.h (class module): Update the definition.
	* module.cc (viewport): New function.

1998-07-07  Kaz Sasayama  <Kaz.Sasayama@hypercore.co.jp>

	* glclock.h (class glclock): Update the definition.
	* glclock.cc (update): Do return a non-zero value.

1998-07-02  Kaz Sasayama  <Kaz.Sasayama@hypercore.co.jp>

	* Version 0.17 released.

	* configure.in: Add checks for OpenGL libraries.

	* TODO: New file.

1998-07-01  Kaz Sasayama  <Kaz.Sasayama@hypercore.co.jp>

	* module.cc (draw_clock): Throw bad_alloc on failure of
	gluNewQuadric.

	* Makefile.am (rglclock_LDFLAGS): Add -export-dynamic.

	* configure.in: Use AM_PROG_LIBTOOL instead of AC_PROG_RANLIB.

	* module.cc (init): Cull back faces.
	(draw_clock): Make vectors const.
	(init): Likewise.

	* NEWS: Update.

	* glclock.cc (create_context): Use module::init.

	* module.h (class module): Update def.
	* module.cc (init): New function.

	* ChangeLog: Fix doc.
	* NEWS: Fix doc.

1998-06-30  Kaz Sasayama  <Kaz.Sasayama@hypercore.co.jp>

	* module.cc (draw_clock): Use GL_AMBIENT_AND_DIFFUSE.
	(draw_clock): Raise the shininess to 8.

	* Version 0.10 released.

	* module.cc (draw_clock): Clear also the depth buffer.
	(draw_clock): Draw a round dial behind the hands.
	(draw_clock): Set the material parameters.

	* glclock.cc (create_context): Enable GL_DEPTH_TEST.
	(create_context): Move the eye position back.

	* NEWS: Update doc.

	* glclock.cc (update): Use module::rotate.

	* module.h (class module): Update definition.
	* module.cc (rotate): New function.

	* glclock.h (class glclock): Add member m.
	* glclock.cc (glclock): Delete member m.
	(glclock): Allocate member m.
	(draw_clock): Removed.
	(handle_expose_event): Use module::draw_clock.

	* Makefile.am (rglclock_SOURCES): Add module.cc.
	(noinst_HEADERS): Add module.h.

	* module.h: New file.
	* module.cc: New file.

1998-06-28  Kaz Sasayama  <Kaz.Sasayama@hypercore.co.jp>

	* Version 0.8 released.

	* README: Update description.
	* main.cc: Update description comments.
	* glclock.cc: Update description comments.
	* glclock.h: Update description comments.

	* glclock.cc (glclock): Initialize the new members.
	(draw_clock): Do not reset the model view matrix.
	(update): Rotate the model view matrix.
	(create_context): Initialize the model view matrix.

	* glclock.h (class glclock): Add rot_velocity, rot_x, rot_y, and
	rot_z to the members.

	* glclock.cc (draw_clock): Remove x, y, width, and height from
	args.  Remove a glViewport call.
	(handle_expose_event): Add a glViewport call from draw_clock.
	(handle_expose_event): Release selected context at return.
	(create_context): Likewise.
	(create_context): Use glFrustum instead of gluPerspective.
	(draw_clock): Adjust positions.
	(draw_clock): Redisign the hands.
	(draw_clock): Make the short hand smoother.
	(create_context): Move the light 0.
	(create_context): Set the model view matrix to an identity.

1998-06-27  Kaz Sasayama  <Kaz.Sasayama@hypercore.co.jp>

	* configure.in: Add AC_STRUCT_TM and AC_C_CONST.

	* Version 0.3 released for preview.

	* ChangeLog started.

