1999-08-15  Kaz Sasayama  <Kaz.Sasayama@hypercore.co.jp>

	* lib/simple.c (draw_dial_disk): New function.
	(simple_draw_clock): Use draw_dial_disk and disable depth tests
	while drawing disks.
	(simple_init): #if-out depth test setting.

	* configure.in: Test deflate for -lz.

	* bin/main.cc (create_window): Add accel group.
	(class clock_app): Remove member accels.  Also change all users.

	* NEWS: Modified.

	* lib/clockoptions.cc (apply): Handle texture-mapping options.

	* include/glclock.h (class glclock): Add new member
	set_module_prop.

	* lib/Makefile.am (noinst_HEADERS): Added.

	* include/Makefile.am (noinst_HEADERS): Remove simple.h.

	* lib/simple.h: Moved from include.

	* lib/glclock.cc (handle_expose_event): Change the use of
	module::draw_clock.

	* lib/module.cc (prop, set_prop): New functions.
	(draw_clock): Remove argument.

	* include/module.h (class module): Add new members prop and
	set_prop.
	(class module): Change draw_clock's arguments.

	* include/glclock.h (class glclock): Add comments.

	* bin/main.cc (clock_app): Set default visual and colormap.
	(main): Add try-catch block to destroy toplevel.

	* lib/glclock.cc (best_visual): New function.

	* include/glclock.h (class glclock): Add new member best_visual.

1999-07-29  Kaz Sasayama  <Kaz.Sasayama@hypercore.co.jp>

	* lib/simple.c (modify_image_info): Renamed from modify_info.
	(read_texture_image): Renamed from read_texture and implemented.
	(load_texture_image): Renamed from load_texture.
	(set_texture): New function.
	(simple_draw_clock): Add texture-mapping support.
	(simple_set_prop): Set new flags.
	(simple_init): Remove unused code.

1999-07-27  Kaz Sasayama  <Kaz.Sasayama@hypercore.co.jp>

	* include/simple.h: Add simple_set_prop decl.

	* lib/simple.c: Use <> for simple.h.
	(read_texture, modify_info, load_texture): New functions.
	(simple_set_prop): New function.

	* bin/main.cc (class clock_app): New class replacing struct
	app_data.
	(class clock_app): Add member accels and destructor.
	(create_window): Pass accels to GtkItemFactory.
	(~clock_app): New function.
	(clock_app): Make a new GtkAccelGroup.

1999-07-26  Kaz Sasayama  <Kaz.Sasayama@hypercore.co.jp>

	* profile.cc (save): Use xmlNewDocNode.

1999-07-23  Kaz Sasayama  <Kaz.Sasayama@hypercore.co.jp>

	* configure.in: Change the version number to 1.3.4.

	* NEWS: Modified.

	* rglclock.1: Modified.

1999-07-16  Kaz Sasayama  <Kaz.Sasayama@hypercore.co.jp>

	* bin/main.cc (create_widget): Set geometry hints.
	(create_widget): Revise last change and set policy.

	* rglclock.1: Modified.

	* main.cc (longopts): Add `--private-colormap' option.
	(display_help): Update the help message.
	(main): Pass opt_private_colormap to gdk_colormap_new.

1999-07-14  Kaz Sasayama  <Kaz.Sasayama@hypercore.co.jp>

	* Makefile.am (dist-snapshot distcheck-snapshot): Removed.

	* bin/Makefile.am: New file.

	* lib/Makefile.am: New file.

	* include/Makefile.am: New file.

	* Makefile.am: Updated.

	* Move library sources to lib, library headers to include, and
	other sources to bin.

1999-07-13  Kaz Sasayama  <Kaz.Sasayama@hypercore.co.jp>

	* NEWS: Modified.

	* configure.in: Set version to 1.3.3.

	* rglclock.1: Modified.

	* glclock.cc (handle_expose_event): Add drawing code.
	(update): #if out drawing code and use gtk_widget_queue_draw
	instead.
	(create_widget): Connect "expose_event" to its handler.

1999-05-28  Kaz Sasayama  <Kaz.Sasayama@hypercore.co.jp>

	* AUTHORS: Modified.

	* NEWS: Modified.

	* main.cc (parse_options): Use getopt_long unconditionally.

	* configure.in: Removed tests for <getopt.h> and getopt_long.

	* Makefile.am (rglclock_SOURCES): Add getopt.c and getopt1.c.
	(noinst_HEADERS): Add getopt.h.

	* getopt.h, getopt.c, getopt1.c: New file, copied from glibc 2.1.

	* THANKS: New file.  Also regenerate Makefile.in.

1999-05-22  Kaz Sasayama  <Kaz.Sasayama@hypercore.co.jp>

	* Makefile.am (EXTRA_DIST): Add MEMO.ja.

	* MEMO.ja: New file.

	* TODO: Modified.

	* NEWS: Modified.

	* configure.in: Set VERSION to 1.3.2.

	* main.cc (parse_options): Add new options.
	(display_help): New function.
	(create_widget): Show the menu bar only if opt_hide_menu_bar's
	value is false.
	(main): Handle the --help option.

	* TODO: Modified.

1999-05-16  Kaz Sasayama  <Kaz.Sasayama@hypercore.co.jp>

	* main.cc: Add Nana support.
	(struct app_data): New struct.
	(edit_options, describe, main): Use app_data.
	(create_widget): Change the argument to app_data.
	(create_widget): Store the app_data in user data.

	* glclock.h (class about_dialog): Derive from modal_dialog.
	(class about_dialog): Update members.
	(class clock_options_dialog): Remove unused members.

	* about.cc: Remove unused includes.  Add Nana support.
	(show, ~about_dialog, about_dialog, handle_delete_event): Removed.
	(create_widget): New function.

	* options.cc (create_widget): Set the window title.

	* utils.h (UTILS_H): Renamed from OPTIONS_H.

	* Makefile.am (noinst_HEADERS): Change options.h to utils.h.

	* utils.h: Renamed from options.h.  Also change all includes.

	* Makefile.am (dist-snapshot distcheck-snapshot): Add
	distcheck-snapshot.  Modify version numbering for snapshots.

	* options.h (class options_dialog): Remove duplicate members.

	* options.cc (act, quit, handle_delete_event): New functions of
	modal_dialog.
	(create_widget): Do not connect delete_event.
	(act, handle_delete_event): Removed from options_dialog.
	(handle_ok, handle_cancel): Use modal_dialog::quit.

	* options.h (class modal_dialog): New class.
	(class options_dialog): Change the base class to modal_dialog from
	controller.

	* profile.h: Add comments.
	Remove unnecessary struct decl.

	* main.cc (main): Make the profile object file-local.
	(edit_options): Call profile::save.

	* profile.cc (options_changed): Just set changed instead of save.
	(save): Do not save if not changed.
	(restore): Clear changed.
	(open): New function.
	(profile): Remove all arguments.  Initialize changed to false.

	* profile.h (options_callback): Add member: changed.

	* options.cc (add, ~controller, remove_widget): New functions of
	class controller.
	(populate, create_widget): Use controller::func_data.
	(create_widget): Use controller::add.
	(~options_dialog, remove_widget): Removed from class
	options_dialog.
	(handle_ok): Use controller::to_ptr.

	* options.h (class controller): New class.
	(class options_dialog): Derive from controller and remove
	duplicate members.

	* main.cc (edit_options): Use the new interface.

	* options.h (class options_dialog): Update members.
	(class options_dialog): Move create_widget to protected.

	* options.cc (create_widget): Do not set modal.
	(act): New function.
	(~options_dialog): Set sensitive flags to false, too.
	(handle_ok, handle_cancel, handle_delete_event, remove_widget):
	Add `throw ()'.
	(remove_widget): Remove a diagnostic log message.

	* clockoptions.cc (create_widget): Add items for texture mapping.
	(apply): Use macro for widget data key.

	* configure.in: Add checks for -lpng and <png.h>.

1999-05-15  Kaz Sasayama  <Kaz.Sasayama@hypercore.co.jp>

	* TODO: Modified.

	* configure.in: Set VERSION to 1.4.0.

	* main.cc: Include <sys/stat.h>.

	* NEWS: Modified.

	* configure.in: Add check for mkdir.
	Set VERSION to 1.3.1.

	* main.cc (main): Make ~/.rglclock directory.

	* clockoptions.cc (create_widget): Put unit after the spin button.

	* glclock.cc (update): Draw only for drawable widgets.

	* rglclock.1: Remove keyword substitutions for Package and
	Version.

	* configure.in: Remove PRCS keyword substitutions.

	* TODO: Modified.

1999-05-04  Kaz Sasayama  <Kaz.Sasayama@hypercore.co.jp>

	* TODO: Modified.

	* main.cc (main): Add p as a callback of c.
	(main): Remove save before exit.

	* profile.h (options_callback): Add glclock::options_callback to
	virtual base class.

	* profile.cc (options_changed): New function.

	* glclock.cc (remove_callback, add_callback): New functions.
	(set_update_rate): Call all callbacks.

	* glclock.h (class glclock): Add struct options_callback.
	(class glclock): Add member callbacks.

	* Makefile.am (libclock_a_SOURCES): Move glclock.cc and about.cc
	from rglclock_SOURCES.

	* glclock.cc (glclock): Remove creation of a item factory.
	(handle_button_event): Remove the case for button-3.
	(menu_quit, menu_about, edit_options): Removed.

	* glclock.h (class glclock): Remove members for the popup menu.

	* main.cc (edit_options, describe): New function.
	(create_widget): Modify the menu.

	* TODO: Modified.

	* NEWS: Modified.

	* main.cc (main): Save and restore options.

	* configure.in: Add checks for <gnome-xml/parser.h> and -lxml,
	-lz.

	* Makefile.am (rglclock_SOURCES): Add profile.cc.
	(noinst_HEADERS): Add profile.h.

	* profile.h: New file.

	* profile.cc: New file.

	* main.cc (create_widget): New function.
	(main): Use create_widget.
	(main): Make the glclock object block-local.

1999-05-03  Kaz Sasayama  <Kaz.Sasayama@hypercore.co.jp>

	* main.cc (main): Store glc as callback data for menu items.
	(handle_delete_event): Removed.
	(main): Make toplevel function-local.

	* autowidget.h (class auto_widget): Removed.  Also remove all uses
	by replacing with GtkObject_ptr.

	* main.cc (main): Use GtkObject_ptr.

	* autowidget.h (template class GtkObject_ptr): New class template.

	* main.cc (main): Make a vbox and a menu bar.

	* gtkrc: Removed.

	* Makefile.am (pkgdata_DATA): Removed.
	(EXTRA_DIST): Remove gtkrc.

	* glclock.h (class glclock): Update members.
	(class glclock): Remove member t.

	* glclock.cc (glclock): Remove setting of t.
	(update): Keep the current time in a function-local variable.
	(update) [!HAVE_GETTIMEOFDAY]: Use timeout_rate.
	(handle_destroy_event, handle_configure_event, finish_realize):
	Removed.
	(update) [HAVE_GETTIMEOFDAY]: Add comments.
	(glclock): Disable the unimplemented menu item.

	* main.cc (main): Use create_widget.

	* glclock.h: Add comments.
	(class glclock): Update member functions.
	(class glclock): Add data members: widgets and menu_parent.
	(class glclock): Remove member drawing_area.

	* glclock.cc: Include <algorithm>.
	(create_widget, remove_widget): New function.
	(operator GtkWidget *): Removed.
	(~glclock): Disconnect all signals for each widget.
	(~glclock): Unref context.
	(glclock): Remove the drawing area creation.
	(update): Handle all widgets.
	(update): Create GL context if not created.
	(handle_button_event): Remember the parent widget in menu_parent
	on button-3 press.
	(menu_about, edit_options): Use menu_parent.

	* clockoptions.cc (apply): Change the update rate.  Modify the
	diagnostic log message.
	(create_widget): Use the current update rate.
	(general_options_page): New function.
	(clock_options_dialog): Add an argument.
	(create_widget): Modify the label1 text.

	* glclock.h (class general_options_page): Add new data member
	target and constructor.
	(class clock_options_dialog): Add an argument to constructor.
	Also update all callers.

	* glclock.cc (DEFAULT_TIMEOUT_RATE): Do not defined if defined.

	* glclock.h (class glclock): Add new data member: timeout_rate.
	(class glclock): Add new member functions: update_rate and
	set_update_rate.

	* glclock.cc: Include headers for diagnostics.
	(TIMEOUT_RES, rate_to_interval, DEFALUT_TIMEOUT_RATE): New macro.
	(set_update_rate): New function.
	(glclock): Initialize new members.  Rewrite the timeout
	initialization.

1999-04-29  Kaz Sasayama  <Kaz.Sasayama@hypercore.co.jp>

	* Makefile.am (noinst_LIBRARIES): Add libgdkgl.a and libclock.a.
	(libgdkgl_a_SOURCES): Add gdkgl.c.
	(libclock_a_SOURCES): Add simple.c, module.cc, options.cc, and
	clockoptions.cc.
	(rglclock_SOURCES): Remove gdkgl.c.
	(rglclock_SOURCES): Remove files added to libclock_a_SOURCES.
	(rglclock_LDADD): Add libclock.a and libgdkgl.a.

	* options.cc (populate, create_dialog): Add assertions.
	(create_widget, add_page, remove_widget): Add logging.

	* glclock.cc (edit_options): Use gtk_widget_destroy.

1999-04-28  Kaz Sasayama  <Kaz.Sasayama@hypercore.co.jp>

	* NEWS: Modified.

	* Makefile.am (EXTRA_DIST): Add VERSION-ID.

	* VERSION-ID: New file.

	* configure.in: Add `--with-nana'.

	* glclock.cc (edit_options): Rewrote using the new dialog classes.

	* glclock.h (class clock_options_dialog): Use the new
	options_dialog.

	* options.cc: Rewrite class options_dialog.

	* glclock.h: Include "options.h".
	(class clock_options_dialog): Renamed from options_dialog.

	* Makefile.am (rglclock_SOURCES): Add clockoptions.cc.
	(noinst_HEADERS): Add options.h.

	* options.h: New file.

	* clockoptions.cc: New file.

1999-04-07  Kaz Sasayama  <Kaz.Sasayama@hypercore.co.jp>

	* README: Modified.

	* NEWS: Modified.

	* options.cc (populate): Replace gtk_window_set_default with
	gtk_window_set_focus.
	* about.cc (populate): Likewise.

	* glclock.h (class glclock): Use GtkItemFactory.

	* glclock.cc: Use GtkItemFactory instead of GtkMenuFactory.
	(menu_activate): Removed.
	(describe): Removed.
	(~glclock, glclock): Replace gtk_menu_factory_destroy with
	gtk_object_unref.
	(menu_quit, edit_options): Change arguments.
	(glclock): Change the menu initialization.
	(menu_about): New function.

	* options.cc (options_dialog): Use gtk_window_set_transient_for.
	(finish_realize): Removed.  Also remove all references.

	* about.cc (about_dialog): Use gtk_window_set_transient_for.
	(finish_realize): Removed.  Also remove all references.

	* main.cc: Remove ad-hoc session support.
	(set_command): Removed.

	* configure.in: Remove --disable-wm-command and
	--disable-wm-transient-for.
	Require GTK+ version 1.2.0 or later.
	Add AC_ISC_POSIX test.
	Move GNU get text to later.

	* main.cc: Include <cstdio> and <exception>.

	* about.cc: Include <cstdlib> and <cstdio>.

1999-03-26  Kaz Sasayama  <Kaz.Sasayama@hypercore.co.jp>

	* Makefile.am (update-po): New target.

1999-03-24  Kaz Sasayama  <Kaz.Sasayama@hypercore.co.jp>

	* main.cc (clean): Removed.
	(main): Remove use of clean and add clean-up after gtk_main.

1999-02-24  Kaz Sasayama  <Kaz.Sasayama@hypercore.co.jp>

	* about.cc (about_dialog): Rewrote using auto_widget.
	(populate): Likewise.

	* autowidget.h: New file.
	* Makefile.am (noinst_HEADERS): Add autowidget.h.

	* options.cc: Add an excetion to license terms.

	* README: Modified.

	* README.ja: New file.
	* Makefile.am (EXTRA_DIST): Add README.ja.

	* NEWS: Updated.

	* about.cc: Add an exception to license terms.
	* glclock.cc: Likewise.
	* glclock.h: Likewise.
	* main.cc: Likewise.
	* module.cc: Likewise.
	* module.h: Likewise.
	* simple.c: Likewise.
	* simple.h: Likewise.

1999-02-21  Kaz Sasayama  <Kaz.Sasayama@hypercore.co.jp>

	* README: Modified.

	* main.cc: Undef inline at first.
	Modify comments.
	(main): Add exception handling.
	(main): Use EXIT_SUCCESS.
	Undef SESSION if GTK+ 1.1 or later.

1999-02-17  Kaz Sasayama  <Kaz.Sasayama@hypercore.co.jp>

	* Makefile.am (dist-snapshot): Add suffix with x to VERSION.

1999-02-14  Kaz Sasayama  <Kaz.Sasayama@hypercore.co.jp>

	* options.cc (populate): Add the Rendering tab.

	* glclock.cc (edit_options): New function.  Update the header too.
	(glclock): Add the function to the popup menu.
	(glclock): Move a comment.

	* options.cc: New file.
	* Makefile.am (rglclock_SOURCES): Add options.cc.

	* glclock.h (class options_dialog): New class.

	* gtkrc: New file.
	* Makefile.am (pkgdata_DATA): Add gtkrc.
	(EXTRA_DIST): Add gtkrc.

1999-02-13  Kaz Sasayama  <Kaz.Sasayama@hypercore.co.jp>

	* glclock.cc (finish_realize): New function.  Update the header
	too.
	(handle_configure_event): Remove context creation.
	(glclock): Connect "realize".

	* about.cc (show): Use gtk_grab_add/remove.
	(finish_realize): Renamed and modified from handle_configure_event
	for the "realize" signal.  Update all refs too.
	(about_dialog): Add "realize" connection and remove
	"configure_event".

	* main.cc (parse_gtkrc) [PKGDATADIR]: Add gtk_rc_parse for default
	gtkrc file.

	* Makefile.am (INCLUDES): Add -DPKGDATADIR=....

	* gettextize.
	* po/POTFILES.in: New file.
	* po/ja.po: New file.
	* configure.in (ALL_LINGUAS): Add ja.

	* main.cc (parse_gtkrcs): New function.
	(main): Initialize NLS.
	(main): Use parse_gtkrcs.

1999-02-12  Kaz Sasayama  <Kaz.Sasayama@hypercore.co.jp>

	* glclock.cc: Add #include <libintl.h>.
	Add using namespace std.
	(_): Defined.
	(glclock): Use the _ macro for message text.

	* about.cc: Add #include <libintl.h>.
	(_): Defined to use gettext.

	* main.cc: Add #include <libintl.h>.
	(_): Defined.

	* Makefile.am (INCLUDES): Add -DLOCALEDIR=....

1999-02-05  Kaz Sasayama  <Kaz.Sasayama@hypercore.co.jp>

	* Makefile.am (data_DATA): Added.

1999-02-04  Kaz Sasayama  <Kaz.Sasayama@hypercore.co.jp>

	* TODO: Updated.

	* NEWS: Updated.

	* Makefile.am (INCLUDES): Remove -DSESSION.

	* about.cc: Remove #define ENABLE_TRANSIENT_FOR_HINT.

	* configure.in: Add options: --disable-wm-command and
	--disable-wm-transient-for.
	* acconfig.h: Add entries for SESSION and
	ENABLE_TRANSIENT_FOR_HINT.

	* about.cc (about_dialog): Use asprintf/sprintf for gettext
	migration later.
	(populate): Make the version string using asprintf/sprintf.

1999-02-03  Kaz Sasayama  <Kaz.Sasayama@hypercore.co.jp>

	* Version 1.2.1.

	* NEWS: Updated.

1999-02-02  Kaz Sasayama  <Kaz.Sasayama@hypercore.co.jp>

	* about.cc (about_dialog): Set the window title.
	(about_dialog): Position the window to center.
	(populate): Set the default to the OK button.
	(about_dialog): Construct the title string on the fly.
	(_): Defined for later gettext migration.
	(populate): Mark "OK" as a translation string.

	* about.cc (show): Remove the argument and use the parent_widget
	member.
	(show): Remove connect/disconnect for "configure_event".
	(about_dialog): Add an argument for the parent_widget
	initialization.
	(about_dialog): Connect "configure_event" to the handler.
	(handle_configure_event): Change the cast of the callback data to
	about_dialog *.
	(populate): Set the expand arg of the OK button to FALSE.

	* glclock.h (class about_dialog): Add member: parent_widget.

	* about.cc (handle_configure_event): Made to a static member.

	* glclock.h (class about_dialog): Add static members.

	* about.cc (handle_ok): Made to a static member.
	(show): Handle the case of parent == NULL.
	(handle_delete_event): New method.
	(about_dialog): Connect "delete_event" to the handler.

	* glclock.cc (describe): Use about_dialog.

	* about.cc (handle_ok): Renamed from ok.
	(about_dialog, ~about_dialog, show): New methods, replacing
	show_about.
	(populate): New function.
	(show_about): Removed.

	* glclock.h (class about_dialog): New class.

	* NEWS: Updated.
	* README: Updated.
	* TODO: Updated.

1999-02-01  Kaz Sasayama  <Kaz.Sasayama@hypercore.co.jp>

	* Version 1.2.1.

	* AUTHORS: Update text.
	* NEWS: Update text.
	* README: Update text.
	* TODO: Update text.

1999-01-29  Kaz Sasayama  <Kaz.Sasayama@hypercore.co.jp>

	* rglclock.1: Update text.

	* about.cc (show_about): Set padding for the label.

	* about.cc: #include "glclock.h".
	* glclock.cc: Remove delaration of show_about.
	* glclock.h: Declare show_about.

	* about.cc (show_about): Disallow the dialog resize.
	(show_about): Update the label text.
	(show_about): Use gtk_box_pack_start.
	[ENABLE_TRANSIENT_FOR_HINT]: #include <gdk/gdkx.h>.
	[ENABLE_TRANSIENT_FOR_HINT] (handle_configure_event): New
	function.
	(show_about) [ENABLE_TRANSIENT_FOR_HINT]: Connect
	"configure_event" to its handler.

	* simple.c (simple_draw_clock): Use gettimeofday if available.

1999-01-27  Kaz Sasayama  <Kaz.Sasayama@hypercore.co.jp>

	* Makefile.am (dist-snapshot): New target.

	* simple.c (simple_draw_clock): Modify the look.
	(simple_draw_clock): Fix the test condition.

1999-01-25  Kaz Sasayama  <Kaz.Sasayama@hypercore.co.jp>

	* simple.c (simple_draw_clock): Mark every hours.

	* glclock.cc (describe): Add a call to show_about.

	* Makefile.am (rglclock_SOURCES): Add about.cc.
	* about.cc: New file.

	* simple.c (simple_draw_clock): Modify parameters.
	(simple_draw_clock): Use the model local viewer by default.

	* module.cc (draw_clock): Move the core code to simple.c.
	(init): Likewise.

	* simple.c (simple_draw_clock, simple_init): New functions.
	* simple.h: Updated with the prototype decl.

1999-01-24  Kaz Sasayama  <Kaz.Sasayama@hypercore.co.jp>

	* glclock.cc (glclock): Use "Exit" for the menu label instead of
	"Quit".  Fill values in menu items.

	* module.cc: Remove #define _GNU_SOURCE.

	* simple.h: New file.
	* simple.c: New file.
	
	* configure.in: Add the config header.

	* acconfig.h: New file.
	* config.h.in: Generated by autoheader.

	* gdkgl.c [HAVE_CONFIG_H]: Include "config.h".

	* NEWS: Updated.

1999-01-23  Kaz Sasayama  <Kaz.Sasayama@hypercore.co.jp>

	* AUTHORS: Updated.

	* main.cc: Do not define _GNU_SOURCE.
	(main): Choose an appropriate visual.

	* glclock.h: Include "gdkgl.h".  Reorder #include's.

	* glclock.cc: Do not define _GNU_SOURCE.
	Include "gdkgl.h".  Reorder #include's.
	(update): Use "gdkgl.h" function.
	(handle_configure_event): Likewise.

	* configure.in: Remove gdkGL/Makefile from output.

	* Makefile.am (rglclock_SOURCES): Add gdkgl.c.
	(rglclock_LDADD): Remove gdkGL/libgdkGL.a.
	(noinst_HEADERS): Add gdkgl.h.
	(SUBDIRS): Removed.

	* main.cc (parse_options): New function.
	(main): Add option parsing.

	* glclock.h: Include <gtk/gtkmenufactory.h>.

	* configure.in: Change the version number system.
	Remove unneeded blank lines.
	Define _GNU_SOURCE.
	Add checks for <getopt.h> and getopt_long.

1998-09-22  Kaz Sasayama  <Kaz.Sasayama@hypercore.co.jp>

	* glclock.cc (glclock): Update menu entries.

1998-09-21  Kaz Sasayama  <Kaz.Sasayama@hypercore.co.jp>

	* NEWS: Update.

	* glclock.h (class glclock): Add members: describe, struct
	menu_listener, menu_quit, menu_factory, about.

	* glclock.cc (menu_activate): New function.
	(describe): New function.
	(~glclock): Destroy the member menu factory.
	(glclock): Create and initialize a menu factory.
	(handle_button_event): Handle button-3 for pop-up menu.
	(menu_quit): New function.

1998-08-19  Kaz Sasayama  <Kaz.Sasayama@hypercore.co.jp>

	* module.cc (draw_clock) [LOGO128]: Add experimental texture code.
	(init) [LOGO]: Likewise.

	* module.h (class module): Add member rot.
	* module.cc (rot): Removed.
	(init): Initialize this->rot.
	(draw_clock): Set the modelview matrix.
	(rotate): Do not reset the modelview matrix.

	* module.cc (draw_clock): Use flat shading while drawing a dial.
	(draw_clock) [0]: (Use local viewer while drawing hands.)

1998-08-10  Kaz Sasayama  <Kaz.Sasayama@hypercore.co.jp>

	* Makefile.am (INCLUDES): Define SESSION.

	* main.cc [SESSION] (argc_save): New variable.
	[SESSION] (argv_save): New variable.
	[SESSION] (set_command): New function.
	(main) [SESSION]: Save the original arguments.
	(main) [SESSION]: Connect after-realize to set_command.

1998-07-31  Kaz Sasayama  <Kaz.Sasayama@hypercore.co.jp>

	* rglclock.1: Update .TH.

	* Makefile.am (man_MANS): Add rglclock.1.
	(EXTRA_DIST): Add ${man_MANS}.

	* rglclock.1: New file.

1998-07-27  Kaz Sasayama  <Kaz.Sasayama@hypercore.co.jp>

	* main.cc (clean): #ifdef out unref'ing toplevel.

	* module.cc (HAND_ADC): New const.
	(HAND_SC): New const.
	(HAND_SR): New const.
	(draw_clock): Use them.

1998-07-23  Kaz Sasayama  <Kaz.Sasayama@hypercore.co.jp>

	* glclock.cc (glclock): Add an exception handler.

1998-07-19  Kaz Sasayama  <Kaz.Sasayama@hypercore.co.jp>

	* TODO: Updated.

1998-07-16  Kaz Sasayama  <Kaz.Sasayama@hypercore.co.jp>

	* main.cc: Move toplevel out of main.
	(main): Remove local toplevel.

1998-07-14  Kaz Sasayama  <Kaz.Sasayama@hypercore.co.jp>

	* glclock.cc: Test HAVE_SYS_TIME_H for sys/time.h.

	* module.cc (draw_clock): Reduce the number of rings.

	* configure.in: Add check for sys/time.h.  Add AC_HEADER_TIME.

	* glclock.cc (update): Compensate rotation speed using
	gettimeofday.

1998-07-13  Kaz Sasayama  <Kaz.Sasayama@hypercore.co.jp>

	* Makefile.am (rglclock_LDFLAGS): Removed.
	* configure.in: Remove AM_PROG_LIBTOOL.

	* NEWS: Updated.

	* module.cc (draw_clock): Draw a mark at the top of the dial.
	(rotate): Correct rotation.

	* configure.in: Check unistd.h and gettimeofday.

	* module.cc (draw_clock): Use glXXXf functions instead of glXXXd.

1998-07-12  Kaz Sasayama  <Kaz.Sasayama@hypercore.co.jp>

	* glclock.cc: Update the FSF address.
	* glclock.h: Likewise.
	* main.cc: Likewise.
	* module.cc: Likewise.
	(draw_clock): Draw the back of the dial.

	* module.h: Likewise.

	* README: Add license information.

1998-07-11  Kaz Sasayama  <Kaz.Sasayama@hypercore.co.jp>

	* NEWS: Updated.

	* TODO: Updated.

	* glclock.h (class glclock): Remove member tm and add t.
	(class glclock): Update the definition.  Reorder data members.
	* glclock.cc (glclock): Set the new member.
	(update): Update and use the new member.
	(handle_configure_event): Create a context if none.
	(create_context): Removed.
	(glclock): Do not connect "realize" to a handler.
	(handle_destroy_event): New function.
	(glclock): Connect "destroy_event" to its handler.
	(~glclock): Do not destroy context.
	(update): Do not test the availability of a window.

	* glclock.cc (handle_expose_event): Do not draw here.

	* main.cc (clean): New function.
	(handle_delete_event): Call gtk_main_quit instead.
	(main): Register clean as a exit function.
	(handle_sig_by_exit): Removed.
	(set_handlers): Removed.
	(main): Remove a call to set_handlers.

	* main.cc (handle_delete_event): New function.
	(main): Connect a "delete_event" handler for toplevel.

	* glclock.cc (update): Draw clock only when a window and a context
	are available.

1998-07-09  Kaz Sasayama  <Kaz.Sasayama@hypercore.co.jp>

	* Version 0.24 released.

	* TODO: Updated.

	* NEWS: Updated.

	* glclock.cc (glclock): Install the "button_press/release_event"
	handlers.
	(glclock): Change rot_velocity's initial value to 0.
	(update): Convert the rotation velocity into degrees.

	* glclock.h (class glclock): Update the definition.
	(class glclock): Add new members press_x and press_y.

	* glclock.cc (glclock): Do not install the "expose_event"
	handler.
	(handle_button_event): New function.

	* Version 0.21 released.

	* TODO: Updated.

	* NEWS: Updated.

	* glclock.cc (update): Call draw_clock directly.

	* gdkGL/Makefile.am (libgdkGL_a_SOURCES): Drop gdkGL_gdkutils.c.
	(noinst_HEADERS): Drop gdkGL_gdkutils.h.

	* module.cc (draw_clock): Raise the GL_SPECULAR values.
	(init): Add another light.
	(draw_clock): Raise the GL_SHININESS value.

	* glclock.h (class glclock): Update the definition.
	* glclock.cc (handle_configure_event): New function.
	(glclock): Connect "configure_event" to the handler.
	(handle_expose_event): Do not call glViewport.
	Remove #include <GL/gl.h>.

	* module.h (class module): Update the definition.
	* module.cc (viewport): New function.

1998-07-07  Kaz Sasayama  <Kaz.Sasayama@hypercore.co.jp>

	* glclock.h (class glclock): Update the definition.
	* glclock.cc (update): Do return a non-zero value.

1998-07-02  Kaz Sasayama  <Kaz.Sasayama@hypercore.co.jp>

	* Version 0.17 released.

	* configure.in: Add checks for OpenGL libraries.

	* TODO: New file.

1998-07-01  Kaz Sasayama  <Kaz.Sasayama@hypercore.co.jp>

	* module.cc (draw_clock): Throw bad_alloc on failure of
	gluNewQuadric.

	* Makefile.am (rglclock_LDFLAGS): Add -export-dynamic.

	* configure.in: Use AM_PROG_LIBTOOL instead of AC_PROG_RANLIB.

	* module.cc (init): Cull back faces.
	(draw_clock): Make vectors const.
	(init): Likewise.

	* NEWS: Update.

	* glclock.cc (create_context): Use module::init.

	* module.h (class module): Update def.
	* module.cc (init): New function.

	* ChangeLog: Fix doc.
	* NEWS: Fix doc.

1998-06-30  Kaz Sasayama  <Kaz.Sasayama@hypercore.co.jp>

	* module.cc (draw_clock): Use GL_AMBIENT_AND_DIFFUSE.
	(draw_clock): Raise the shininess to 8.

	* Version 0.10 released.

	* module.cc (draw_clock): Clear also the depth buffer.
	(draw_clock): Draw a round dial behind the hands.
	(draw_clock): Set the material parameters.

	* glclock.cc (create_context): Enable GL_DEPTH_TEST.
	(create_context): Move the eye position back.

	* NEWS: Update doc.

	* glclock.cc (update): Use module::rotate.

	* module.h (class module): Update definition.
	* module.cc (rotate): New function.

	* glclock.h (class glclock): Add member m.
	* glclock.cc (glclock): Delete member m.
	(glclock): Allocate member m.
	(draw_clock): Removed.
	(handle_expose_event): Use module::draw_clock.

	* Makefile.am (rglclock_SOURCES): Add module.cc.
	(noinst_HEADERS): Add module.h.

	* module.h: New file.
	* module.cc: New file.

1998-06-28  Kaz Sasayama  <Kaz.Sasayama@hypercore.co.jp>

	* Version 0.8 released.

	* README: Update description.
	* main.cc: Update description comments.
	* glclock.cc: Update description comments.
	* glclock.h: Update description comments.

	* glclock.cc (glclock): Initialize the new members.
	(draw_clock): Do not reset the model view matrix.
	(update): Rotate the model view matrix.
	(create_context): Initialize the model view matrix.

	* glclock.h (class glclock): Add rot_velocity, rot_x, rot_y, and
	rot_z to the members.

	* glclock.cc (draw_clock): Remove x, y, width, and height from
	args.  Remove a glViewport call.
	(handle_expose_event): Add a glViewport call from draw_clock.
	(handle_expose_event): Release selected context at return.
	(create_context): Likewise.
	(create_context): Use glFrustum instead of gluPerspective.
	(draw_clock): Adjust positions.
	(draw_clock): Redisign the hands.
	(draw_clock): Make the short hand smoother.
	(create_context): Move the light 0.
	(create_context): Set the model view matrix to an identity.

1998-06-27  Kaz Sasayama  <Kaz.Sasayama@hypercore.co.jp>

	* configure.in: Add AC_STRUCT_TM and AC_C_CONST.

	* Version 0.3 released for preview.

	* ChangeLog started.

